# Informed

Informed is a news app that is aimed at _informing_ the general using. Most people don't actually read the news, or read multiple genres of news, but focus on a few main types that they are interested in. 

Since we've only had a few weeks to do so, we haven't completed everything we want to do. Implementing the basic features took a lot of our time, so we haven't gotten up to the lofty goals we had set out originally to do. Instead, these are what we're using:

### Technologies
- [x] CocoaPods - to install dependencies
- [x] Facebook - to handle logins
- [x] Realm - the database that keeps track of users
- [ ] Alamofire - format the data into a JSON
- [x] The Guardian - news source 1
- [x] NPR - news source 2
- [ ] CNN

### Setting Up Our App
- [ ] Install CocoaPods - if not done so already : `sudo gem install cocoapods`
- [ ] Download the project
- [ ] Run `pod install`
- [ ] Use the `.xcworkspace` file that's automatically generated
- [ ] Run!! Mock data should be loaded into your db

##### Our File Structure
```
Informed
+-- _Informed
|    +-- AppDelegate
|    +-- FBViewController - if a user is not logged in, shows a login button
|    +-- FirstViewController - displays the articles 
|    +-- IndividualArticleViewController - once clicked on an article in the FirstVC, displays that selected article
|    +-- SecondViewController - shows the individual user stats page
|    +-- LeaderboardViewController - displays the leaderboard
|    +-- Informed-Bridging-Header.h - bridges the Informed project and the ObjC FB API
+-- _Podfile - contains the dependencies of the project. 
+-- _Informed.xcworkspace - file generated by running `pod install`
+-- _Informed.xcodeproj
+-- _icon.png - the app icon
```

##### Setting up CocoaPods
Cocoa Pods are like the npm of Swift, which basically let you quickly install all the backage dependencies. The way it works is:
- Install CocoaPods on your computer: `sudo gem install cocoapods`
- Make a podfile (which this project already has). They generally look like
``` 
target '[YourProject]' do
        use_frameworks!
        pod '[Your Framework]'
end
```
- Run `pod install`
- Use the `.xcworkspace` file that's automatically generated to develop

##### How We Did the Facebook Login
- Imported the FB SDK, the `FBSDKCoreKid.framework`
- Registered the app on [developers.facebook.com](developers.facebook.com) with ID `1322094234473271`
- Connected the App Delegate to the `FBSDKApplicationDelegate` to access the facebook app in `AppDelegate.swift` and created a bridging header, `Informed-Bridging-Header.h`, to import the appropriate files
- In `AppDelegate.swift`, first check if the user is active by checking if `FBSDKAccessToken.currentAccessToken() == nil`. Depending on this, the app will show the login page or the main view controller.
- In `FBViewController.swift`, created function `fetchProfile()` that grabs email, first name, last name, and profile picture of the user. (will use this info in database)
- Create a user object with the FB email - if one doesn't exist already
- Finally, after logging in successfully the app will switch back to main view controller (`TabViewController`).
- Logout action button on `SecondViewController` takes user back to `FBViewController` where the logout button is now present.

##### How We Obtained the News Articles
- We found this awesome Pod called [Alamofire](https://github.com/Alamofire/Alamofire), which makes HTTP requests super simple.
- After spending some time getting down their functional conventions, in addition to building some test projects, we fit it into `FirstViewController.swift`.
- One awesome trait Alamofire has is that it can return results in XML, JSON, or raw text form, which makes it really easy to parse if you have a familiarity with one.
- For now, all requests are made to The Guardian and NPR's APIs, and returned in JSON format. In the future, we would like to extend this to other news outlets as well.
- Each API request is made within it's own function in `FirstViewController.swift`

##### Storing the Data
- While we originally considered hosting a database, most thing we encountered either costed too much, or had a ton of steps to obtain, or were just plain hard to integrate with a Swift app.
- We elected to use [Realm](https://realm.io/), a mobile database which is stored locally on your iOS device.
- Obviously in future implementations, we'll rely on something more stable and globally accessible, but for the scope of our project, Realm got the job done fast, and is a really cool growing technology that we got to experiment with.
- Realm interactions take place throughout the app, most notably in `AppDelegate.swift` and `FirstViewController.swift`
        - In `AppDelegate.swift`, it's used to populate the database if no records currently exist. By default, we used fake names from the TV show [Parks and Rec.](http://www.nbc.com/parks-and-recreation) as competitors for our current user.
        - In `FirstViewController.swift`, Realm is used to fetch and display new articles, by searching the `Article` table of our database for records which match the `Genre` type in question.
